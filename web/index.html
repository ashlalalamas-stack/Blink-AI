<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>BLINK v0.1</title>
<style>
 body { background:#111; color:#eee; font-family: sans-serif; display:flex; flex-direction:column; height:100vh; margin:0; }
 #chat { flex:1; padding:1rem; overflow-y:auto; }
 #input { display:flex; padding:1rem; gap:0.5rem; }
 textarea { flex:1; background:#222; color:#eee; border:1px solid #444; }
 button { background:#333; color:#eee; border:1px solid #555; }
 label { display:flex; align-items:center; gap:0.25rem; }
 .msg { margin-bottom:0.5rem; }
 .assistant { color:#aaffaa; }
</style>
</head>
<body>
<div id="chat"></div>
<div id="input">
<label><input type="checkbox" id="privacy"/> Privacy mode</label>
<textarea id="text" rows="2"></textarea>
<button id="send">Send</button>
</div>
<script>
const chat = document.getElementById('chat');
const text = document.getElementById('text');
const send = document.getElementById('send');
const privacy = document.getElementById('privacy');
let messages = [];
function append(role, content, local){
  const div = document.createElement('div');
  div.className = 'msg '+role;
  const icon = local === undefined ? '' : (local ? '🛡️' : '🌐');
  div.textContent = (role==='user'?'> ':icon+' ') + content;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}
send.onclick = async () => {
  const content = text.value.trim();
  if(!content) return;
  append('user', content);
  messages.push({role:'user', content});
  text.value='';
  const res = await fetch('/api/chat', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({messages, privacyMode: privacy.checked})
  });
  const data = await res.json();
  messages.push({role:'assistant', content:data.reply});
  append('assistant', data.reply, data.local);
};
</script>
</body>
</html>
